import { useState, useEffect } from "react";

// React ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœê°€ ë³€ê²½ë˜ë©´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ëŠ” ì „ì²´ê°€ ë‹¤ì‹œ ë Œë”ë§ë©ë‹ˆë‹¤.
// ì¦‰, setCalculatedDayë¥¼ í˜¸ì¶œí•˜ì—¬ calculatedDay ìƒíƒœê°€ ë³€ê²½ë˜ë©´,
// Time ì»´í¬ë„ŒíŠ¸ ì „ì²´ê°€ ë‹¤ì‹œ ë Œë”ë§ë˜ë©°, ì»´í¬ë„ŒíŠ¸ ë‚´ì˜ ëª¨ë“  ì½”ë“œê°€ ë‹¤ì‹œ ì‹¤í–‰ë©ë‹ˆë‹¤.

// ì»´í¬ë„ŒíŠ¸ ì „ì²´ ë Œë”ë§: ìƒíƒœê°€ ë³€ê²½ë˜ë©´ ì»´í¬ë„ŒíŠ¸ ì „ì²´ê°€ ë Œë”ë§ë˜ì§€ë§Œ,
// ì´ ë Œë”ë§ ê³¼ì •ì€ ë¦¬ì•¡íŠ¸ê°€ ìµœì í™”í•˜ì—¬ ë¶ˆí•„ìš”í•œ DOM ì—…ë°ì´íŠ¸ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.
// ì¦‰, ìƒíƒœê°€ ë³€ê²½ë  ë•Œë§Œ í•´ë‹¹ ë¶€ë¶„ì´ ì—…ë°ì´íŠ¸ë˜ë©°,
// ë Œë”ë§ëœ JSX ì½”ë“œê°€ ì‹¤ì œë¡œ DOMì— ë°˜ì˜ë˜ëŠ” ê²ƒì€ ìµœì í™”ë©ë‹ˆë‹¤.

// ë Œë”ë§ì´ í•­ìƒ ë¬¸ì œëŠ” ì•„ë‹˜: ì»´í¬ë„ŒíŠ¸ê°€ ì „ì²´ì ìœ¼ë¡œ ë Œë”ë§ë˜ëŠ” ê²ƒì€ ì •ìƒì…ë‹ˆë‹¤.
// ë¬¸ì œëŠ” ë¶ˆí•„ìš”í•œ ìƒíƒœ ë³€ê²½ì´ë‚˜ íš¨ê³¼ê°€ ë°˜ë³µë  ë•Œ ë°œìƒí•©ë‹ˆë‹¤.
// ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ useEffectì™€ ê°™ì€ í›…ì„ í™œìš©í•˜ì—¬ ë Œë”ë§ì„ ì œì–´í•©ë‹ˆë‹¤.

// useEffectë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì€ ê²½ìš°:
// calculatedDayì˜ ìƒíƒœê°€ ë³€ê²½ë˜ê³  Timeì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë¨.
// setCalculatedDayê°€ ë˜ ì‹¤í–‰ë˜ë©´ì„œ
// calculatedDayì˜ ìƒíƒœê°€ ë³€ê²½ë˜ê³  Timeì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë¨.
// ë¬´í•œë£¨í”„ì— ë¹ ì§„ë‹¤.

// useEffectë¥¼ ì‚¬ìš©í•œ ê²½ìš°:
// dayê°’ì„ ì˜ì¡´ì„± ë°°ì—´ì— ì¶”ê°€í•˜ë©´ ì²˜ìŒì— ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ ë ë•Œì—ë§Œ
// setCalculatedDayì´ í˜¸ì¶œë˜ì–´ calculatedDayê°’ì´ ë³€ê²½ë˜ê³ 
// Timeì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ë Œë”ë§ë˜ì§€ë§Œ dayê°’ì˜ ë³€í™”ê°€ ì—†ê¸°ë•Œë¬¸ì—
// useEffectë‚´ë¶€ì˜ setCalculatedDayì´ ë‹¤ì‹œ í˜¸ì¶œë˜ì§€ ì•ŠëŠ”ë‹¤.
// ë”°ë¼ì„œ ë¬´í•œë£¨í”„ê°€ í•´ê²°ëœë‹¤.

// ê²°ë¡ : ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ë°”ë¡œ setStateë¥¼ ì‚¬ìš©í•˜ë©´ ë¬´í•œë£¨í”„ì— ë¹ ì§ˆìˆ˜ìˆë‹¤.
// useEffectë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒíƒœê°€ ë³€ê²½ë˜ì–´ ë Œë”ë§ë˜ëŠ” ê²ƒì‹ ì œì–´í•˜ì.

const Time = () => {
  const [today, setToday] = useState(new Date());
  const year = today.getFullYear();
  const month = today.getMonth();
  const date = today.getDate();
  const day = today.getDay();
  const hour = today.getHours();
  const minute = today.getMinutes();
  const second = today.getSeconds();

  const [calculatedDay, setCalculatedDay] = useState("");
  console.log("----");
  console.log("ë Œë”ë§");

  // ì˜ì¡´ì„± ë°°ì—´: []
  // useEffectê°€ í•œë²ˆ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì—
  // íƒ€ì´ë¨¸ë„ í•œê°œë§Œ ì„¤ì •ë˜ë¯€ë¡œ
  // ì •ë¦¬í•¨ìˆ˜ê°€ í•„ìš”ì—†ë‹¤.

  useEffect(() => {
    setInterval(() => {
      setToday(new Date());
      console.log("setInterval ë‚´ë¶€ì˜ í•¨ìˆ˜ëŠ” 3ì´ˆ ì§€ë‚˜ê³  ì²˜ìŒ ì‹¤í–‰ë¨");
    }, 3000);
  }, []);

  // ì˜ì¡´ì„± ë°°ì—´: [today]
  // today ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ useEffectê°€ ë‹¤ì‹œ ì‹¤í–‰ë˜ê³  ìƒˆë¡œìš´ íƒ€ì´ë¨¸ê°€ ì„¤ì •ë¨.
  // useEffectê°€ ì‹¤í–‰ë˜ê¸° ì „ì— ì •ë¦¬í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ì–´ ê¸°ì¡´ì˜ íƒ€ì´ë¨¸ë¥¼ í•´ì œí•¨.
  useEffect(() => {
    const timer = setInterval(() => {
      setToday(new Date());
      console.log("setInterval ë‚´ë¶€ì˜ í•¨ìˆ˜ëŠ” ì§€ì •ëœ ì‹œê°„ì´ ì§€ë‚˜ê³  ì²˜ìŒ ì‹¤í–‰");
    }, 3000);
    console.log("ğŸš€ ~ timer ~ timer:", timer);
    // setInterval íƒ€ì´ë¨¸ IDê°€ ì¦ê°€í•˜ëŠ” ì´ìœ 

    // ê³ ìœ  ID ë¶€ì—¬: ë¸Œë¼ìš°ì €ëŠ” setIntervalì´ í˜¸ì¶œë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ íƒ€ì´ë¨¸ë¥¼ ìƒì„±í•˜ê³ , ì´ë¥¼ ì‹ë³„í•˜ê¸° ìœ„í•´ ê³ ìœ í•œ IDë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤. ì´ IDëŠ” ë¸Œë¼ìš°ì € ë‚´ì—ì„œ íƒ€ì´ë¨¸ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê³ ìœ í•œ ì‹ë³„ìì…ë‹ˆë‹¤. ë”°ë¼ì„œ setIntervalì´ í˜¸ì¶œë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ íƒ€ì´ë¨¸ IDê°€ ë¶€ì—¬ë©ë‹ˆë‹¤.

    // ê¸°ì¡´ íƒ€ì´ë¨¸ í•´ì œ: clearIntervalì„ í˜¸ì¶œí•˜ì—¬ ê¸°ì¡´ì˜ íƒ€ì´ë¨¸ë¥¼ í•´ì œí•˜ì§€ë§Œ, ì´ ë™ì‘ì€ ë‹¨ìˆœíˆ í•´ë‹¹ íƒ€ì´ë¨¸ë¥¼ ì¤‘ì§€ì‹œí‚¤ëŠ” ê²ƒì´ë©°, ì´ë¯¸ ë¶€ì—¬ëœ íƒ€ì´ë¨¸ IDë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.
    // ë¸Œë¼ìš°ì €ëŠ” ìƒˆë¡œìš´ setInterval í˜¸ì¶œ ì‹œ ìƒˆë¡œìš´ IDë¥¼ ë¶€ì—¬í•˜ë©°, ì´ì „ íƒ€ì´ë¨¸ê°€ í•´ì œë˜ì—ˆë‹¤ê³  í•´ì„œ ê·¸ IDë¥¼ ë‹¤ì‹œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ê³„ì†í•´ì„œ ì¦ê°€í•˜ëŠ” ê³ ìœ í•œ IDë¥¼ ë¶€ì—¬í•©ë‹ˆë‹¤.

    // ID ê´€ë¦¬ ë°©ì‹: ë¸Œë¼ìš°ì €ëŠ” íƒ€ì´ë¨¸ IDë¥¼ ì¬ì‚¬ìš©í•˜ì§€ ì•Šê³ , íƒ€ì´ë¨¸ê°€ ìƒì„±ë  ë•Œë§ˆë‹¤ ì´ì „ì— ì‚¬ìš©ëœ IDë¥¼ ë„˜ì–´ì„œ ìƒˆë¡œìš´ IDë¥¼ í• ë‹¹í•©ë‹ˆë‹¤. ì´ëŠ” ì¤‘ë³µëœ IDë¡œ ì¸í•´ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.

    return () => {
      clearInterval(timer);
    };
  }, [today]);

  // ìš”ì¼ ê³„ì‚°
  useEffect(() => {
    switch (day) {
      case 1:
        setCalculatedDay("ì›”");
        break;
      case 2:
        setCalculatedDay("í™”");
        break;
      case 3:
        setCalculatedDay("ìˆ˜");
        break;
      case 4:
        setCalculatedDay("ëª©");
        break;
      case 5:
        setCalculatedDay("ê¸ˆ");
        break;
      case 6:
        setCalculatedDay("í† ");
        break;
      case 7:
        setCalculatedDay("ì¼");
        break;
    }
  }, [day]);

  return (
    <h1>
      ë‚ ì§œ: {year}ë…„ {month + 1}ì›” {date}ì¼ {calculatedDay}ìš”ì¼
      <br />
      ì‹œê°„: {hour}ì‹œ {minute}ë¶„ {second}ì´ˆ
    </h1>
  );
};

const App3 = () => {
  return (
    <>
      <Time />
    </>
  );
};
export default App3;
